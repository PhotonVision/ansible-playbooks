photonvision.org {
    root * /var/www/html/photonvision-website
    file_server
}

javadocs.photonvision.org {
    @root {
		path /
	}
	redirect @root /stable

	# Serve /stable and /latest from local directories
	handle_path /stable* {
		root * /var/www/html/photonvision-docs/stable/built-docs/javadoc/html
		file_server
	}

	handle_path /latest* {
		root * /var/www/html/photonvision-docs/latest/built-docs/javadoc/html
		file_server
	}
}

cppdocs.photonvision.org {

    @root {
		path /
	}
	redirect @root /stable

	# Serve /stable and /latest from local directories
	handle_path /stable* {
		root * /var/www/html/photonvision-docs/stable/built-docs/doxygen/html
		file_server
	}

	handle_path /latest* {
		root * /var/www/html/photonvision-docs/latest/built-docs/doxygen/html
		file_server
	}
}

demo.photonvision.org {
    root * /var/www/html/photonvision-docs/built-client
    file_server
}

maven.photonvision.org {

    reverse_proxy localhost:8082 {
        header_up X-Forwarded-Proto ${scheme}
    }

    @internal {
        path_regexp internal ^/repository/internal/(.*)
    }
    redir @internal /releases/{http.regexp.internal.1}

    @snapshots {
        path_regexp snapshots ^/repository/snapshots/(.*)
    }
    redir @snapshots /snapshots/{http.regexp.snapshots.1}
}
